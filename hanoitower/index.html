<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
</head>

<body>
	<div class="container" style="padding-top: 8rem;">
		
	</div>


	<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<script type="text/javascript">

	// Tao the svg
	const svg = d3.select(".container").append("svg").attr("width", $(".container").width()).attr("height", $(window).height());

	var floor = [];
	var biggest_floor = $(".container").width()/4;
	var margin = biggest_floor + biggest_floor/2;
	var unit_floor = '';
	var tower_height = '';
	var floors = '';
	var i = 1;

	// Tao floor
	function build_floor(n) {
		unit_floor = biggest_floor/n;
		for (var i = 1; i<=n; i++){
				// Them floor vao the avg
				svg.append("rect")
				.attr("x", function(){
					return (n-i)*(unit_floor/2); // Toa do x cua floor
				})
				.attr("y", function(){
					return i*40; // Toa do y cua floor
				})
				.attr("width", function(){
					return i*unit_floor; // Chieu rong cua floor
				})
				.attr("height",40)
				.classed("floor" + i + " color", true); // Chieu cao cua floor

				floor.push(d3.select(".floor" + i));
			}

			d3.selectAll(".color").style("fill", function() {
				return "hsl(" + Math.random() * 360 + ",100%,50%)";
			}); // Tao mau ngau nhien cho floor

			tower_height = n*40;
			floors = n;
			move(n, 0, margin, 2*margin)
		}

	// Chuyen floor
	function move(n, a, b, c){
		if (n > 0) {
			move(n-1, a, c, b);

			floor[n-1]
			.transition()
			.delay(i*2000)
			.transition()
			.duration(750)
			.attr("y", 0)
			.transition()
			.duration(750)
			.attr("x", c+(floors-n)*(unit_floor/2))
			.transition()
			.duration(750)
			.attr("y", n*40);
			
			i++;

			console.log("Move disk " + n + " from " + a + " to " + c);

			move(n-1, b, a, c);
		}
	}


	build_floor(4);

</script>

</body>
</html>